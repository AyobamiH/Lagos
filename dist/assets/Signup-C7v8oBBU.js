import{u as D,r as i,a as I,j as e}from"./index-CQqwMk0w.js";import{C as E,B as u,I as p}from"./Card-PAg5MTr5.js";function A(){const{signup:j,driverSignup:N,error:m,errorDetails:y,loading:d,profile:n,token:v}=D(),[l,C]=i.useState(""),[s,w]=i.useState(""),[t,S]=i.useState(""),[a,h]=i.useState("rider"),x=I(),g=s&&!/^\+?[0-9]{6,20}$/.test(s.replace(/[^0-9+]/g,""))?"Invalid phone format":null,f=t&&t.length<8?"Min 8 characters required":null,b=d||!l||!s||!t||!!g||!!f,c=r=>(y||[]).filter(o=>o.field===r).map(o=>o.msg||o.message)[0];return i.useEffect(()=>{if(v&&n){const r=(n==null?void 0:n.role)==="driver";x(r?"/driver":"/profile",{replace:!0})}},[v,n,x]),e.jsx("div",{className:"auth-hero-container lagos-gradient-bg",children:e.jsxs(E,{title:`Signup (${a})`,className:"card-elevated w-full max-w-md",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(u,{type:"button",variant:a==="rider"?"primary":"secondary",disabled:a==="rider",onClick:()=>h("rider"),className:"text-xs px-3 py-1",children:"Rider"}),e.jsx(u,{type:"button",variant:a==="driver"?"primary":"secondary",disabled:a==="driver",onClick:()=>h("driver"),className:"text-xs px-3 py-1",children:"Driver"})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),b||(a==="driver"?N(l,s,t):j(l,s,t))},className:"space-y-4",children:[e.jsx(p,{label:"Name",placeholder:"Jane Doe",value:l,onChange:r=>C(r.target.value),error:c("name")}),e.jsx(p,{label:"Phone",placeholder:"+15551234567",value:s,onChange:r=>w(r.target.value),error:c("phone")||g}),e.jsx(p,{label:"Password",type:"password",placeholder:"••••••••",value:t,onChange:r=>S(r.target.value),error:c("password")||f}),e.jsx("div",{className:"pt-2",children:e.jsx(u,{type:"submit",loading:d,disabled:b,className:"w-full",children:d?"Creating…":a==="driver"?"Create Driver Account":"Create Rider Account"})})]}),m&&e.jsx("p",{className:"mt-4 text-sm text-red-600",children:m})]})})}export{A as default};
